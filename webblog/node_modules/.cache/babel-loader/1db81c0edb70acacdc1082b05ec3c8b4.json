{"ast":null,"code":"export const userServices = {\n  login\n};\n\nfunction login(email, password) {\n  const requestOptions = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  };\n  return fetch(\"http://localhost:9000/login\", requestOptions).then(handleResponse).then(user => {\n    //save user session data using localStorage\n    localStorage.setItem(\"user\", JSON.stringify(user));\n    return user;\n  });\n}\n\nfunction handleResponse(response) {\n  return response.text().then(text => {\n    const data = text && JSON.parse(text);\n\n    if (!response.ok) {\n      if (response.status === 401) {\n        // auto logout if 401 response returned from api\n        localStorage.removeItem(\"user\");\n        window.location.reload(true);\n      }\n\n      const error = data && data.message || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}","map":{"version":3,"sources":["C:/Users/Bonaws/React/React_Js/first_collab/webblog/src/_services/userServices.js"],"names":["userServices","login","email","password","requestOptions","method","headers","body","JSON","stringify","fetch","then","handleResponse","user","localStorage","setItem","response","text","data","parse","ok","status","removeItem","window","location","reload","error","message","statusText","Promise","reject"],"mappings":"AAAA,OAAO,MAAMA,YAAY,GAAG;AAC1BC,EAAAA;AAD0B,CAArB;;AAIP,SAASA,KAAT,CAAeC,KAAf,EAAsBC,QAAtB,EAAgC;AAC9B,QAAMC,cAAc,GAAG;AACrBC,IAAAA,MAAM,EAAE,MADa;AAErBC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAFY;AAGrBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEP,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAf;AAHe,GAAvB;AAKA,SAAOO,KAAK,CAAC,6BAAD,EAAgCN,cAAhC,CAAL,CACJO,IADI,CACCC,cADD,EAEJD,IAFI,CAECE,IAAI,IAAI;AACZ;AACAC,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BP,IAAI,CAACC,SAAL,CAAeI,IAAf,CAA7B;AAEA,WAAOA,IAAP;AACD,GAPI,CAAP;AAQD;;AAED,SAASD,cAAT,CAAwBI,QAAxB,EAAkC;AAChC,SAAOA,QAAQ,CAACC,IAAT,GAAgBN,IAAhB,CAAqBM,IAAI,IAAI;AAClC,UAAMC,IAAI,GAAGD,IAAI,IAAIT,IAAI,CAACW,KAAL,CAAWF,IAAX,CAArB;;AACA,QAAI,CAACD,QAAQ,CAACI,EAAd,EAAkB;AAChB,UAAIJ,QAAQ,CAACK,MAAT,KAAoB,GAAxB,EAA6B;AAC3B;AACAP,QAAAA,YAAY,CAACQ,UAAb,CAAwB,MAAxB;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB;AACD;;AACD,YAAMC,KAAK,GAAIR,IAAI,IAAIA,IAAI,CAACS,OAAd,IAA0BX,QAAQ,CAACY,UAAjD;AACA,aAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD;;AAED,WAAOR,IAAP;AACD,GAbM,CAAP;AAcD","sourcesContent":["export const userServices = {\r\n  login\r\n};\r\n\r\nfunction login(email, password) {\r\n  const requestOptions = {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email, password })\r\n  };\r\n  return fetch(\"http://localhost:9000/login\", requestOptions)\r\n    .then(handleResponse)\r\n    .then(user => {\r\n      //save user session data using localStorage\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n\r\n      return user;\r\n    });\r\n}\r\n\r\nfunction handleResponse(response) {\r\n  return response.text().then(text => {\r\n    const data = text && JSON.parse(text);\r\n    if (!response.ok) {\r\n      if (response.status === 401) {\r\n        // auto logout if 401 response returned from api\r\n        localStorage.removeItem(\"user\");\r\n        window.location.reload(true);\r\n      }\r\n      const error = (data && data.message) || response.statusText;\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    return data;\r\n  });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}