{"ast":null,"code":"import history from \"../_helper/history\";\nimport { userService } from \"../_services\";\nexport const login = (email, password) => {\n  return dispatch => {\n    dispatch(\"USERS_LOGIN_REQUEST\");\n    userService.login(email, username).then(user => {\n      dispatch({\n        type: \"USER_LOGIN_SUCCESS\",\n        user\n      });\n      history.push(\"/admin\");\n    }, error => {\n      console.log(error);\n    });\n  };\n};\n\nfunction handleResponse(response) {\n  return response.text().then(text => {\n    const data = text && JSON.parse(text);\n\n    if (!response.ok) {\n      if (response.status === 401) {\n        // auto logout if 401 response returned from api\n        localStorage.removeItem(\"user\");\n        window.location.reload(true);\n      }\n\n      const error = data && data.message || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}","map":{"version":3,"sources":["C:/Users/Bonaws/React/React_Js/first_collab/webblog/src/_action/login.js"],"names":["history","userService","login","email","password","dispatch","username","then","user","type","push","error","console","log","handleResponse","response","text","data","JSON","parse","ok","status","localStorage","removeItem","window","location","reload","message","statusText","Promise","reject"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,oBAApB;AACA,SAASC,WAAT,QAA4B,cAA5B;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;AACxC,SAAOC,QAAQ,IAAI;AACjBA,IAAAA,QAAQ,CAAC,qBAAD,CAAR;AAEAJ,IAAAA,WAAW,CAACC,KAAZ,CAAkBC,KAAlB,EAAyBG,QAAzB,EAAmCC,IAAnC,CACEC,IAAI,IAAI;AACNH,MAAAA,QAAQ,CAAC;AAAEI,QAAAA,IAAI,EAAE,oBAAR;AAA8BD,QAAAA;AAA9B,OAAD,CAAR;AACAR,MAAAA,OAAO,CAACU,IAAR,CAAa,QAAb;AACD,KAJH,EAKEC,KAAK,IAAI;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KAPH;AASD,GAZD;AAaD,CAdM;;AAgBP,SAASG,cAAT,CAAwBC,QAAxB,EAAkC;AAChC,SAAOA,QAAQ,CAACC,IAAT,GAAgBT,IAAhB,CAAqBS,IAAI,IAAI;AAClC,UAAMC,IAAI,GAAGD,IAAI,IAAIE,IAAI,CAACC,KAAL,CAAWH,IAAX,CAArB;;AACA,QAAI,CAACD,QAAQ,CAACK,EAAd,EAAkB;AAChB,UAAIL,QAAQ,CAACM,MAAT,KAAoB,GAAxB,EAA6B;AAC3B;AACAC,QAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB;AACD;;AACD,YAAMf,KAAK,GAAIM,IAAI,IAAIA,IAAI,CAACU,OAAd,IAA0BZ,QAAQ,CAACa,UAAjD;AACA,aAAOC,OAAO,CAACC,MAAR,CAAenB,KAAf,CAAP;AACD;;AAED,WAAOM,IAAP;AACD,GAbM,CAAP;AAcD","sourcesContent":["import history from \"../_helper/history\";\r\nimport { userService } from \"../_services\";\r\n\r\nexport const login = (email, password) => {\r\n  return dispatch => {\r\n    dispatch(\"USERS_LOGIN_REQUEST\");\r\n\r\n    userService.login(email, username).then(\r\n      user => {\r\n        dispatch({ type: \"USER_LOGIN_SUCCESS\", user });\r\n        history.push(\"/admin\");\r\n      },\r\n      error => {\r\n        console.log(error);\r\n      }\r\n    );\r\n  };\r\n};\r\n\r\nfunction handleResponse(response) {\r\n  return response.text().then(text => {\r\n    const data = text && JSON.parse(text);\r\n    if (!response.ok) {\r\n      if (response.status === 401) {\r\n        // auto logout if 401 response returned from api\r\n        localStorage.removeItem(\"user\");\r\n        window.location.reload(true);\r\n      }\r\n      const error = (data && data.message) || response.statusText;\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    return data;\r\n  });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}